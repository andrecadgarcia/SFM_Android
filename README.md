# Structure From Motion Android

Simple project to test SFM process in android phones

Using [BoofCV](https://github.com/lessthanoptimal/BoofCV) for Image processing

and [Rajawali](https://github.com/Rajawali/Rajawali) for 3D rendering


#### Menu

1. Camera: Takes picutes and store in folder named as current timestamp
2. Gallery: Shows pictures and objects folders
3. Calibration: Calibrates android camera using chessboard

#### Calibration

In order to execute the SFM the phone camera needs to be calibrated to retrieve intrinsic parameters.

Take at least 3 accepted pictures from a chessboard - you can define the number of rows and columns

A picture will be accepted when red dots appear between the white and black squares.

A picture will not be accepted when blue lines appear around the squares.

After computing the parameters will be automatically saved in your phone.

#### SFM - Execution

Executes SFM by clicking in any folder in Gallery (.png folders).

The process may take a while and can be cancelled at anytime.

The SFM will process each image and store in a list feature points.

All image points will be crossed with all other images points, and the images with a correlation above 0.3 will be separated.

Starting with the two images with higher correlation the SFM will triangulate the featured points (x,Y) into the 3D world (x,y,z) using the camera intrinsic parameters.
 
In the end, the process will return a list of 3D points. 

#### 3D Viwer

Also in Gallery, change from .png to .obj by clicking in box. It will show current objects generated by sfm.

The viewer provides X,Y,Z slider controls for object visualization, also a rotation checkbox to start/stop rotation.

A selector allows the object type visualization (Sequential, Points and All to All).

#### Object Types

1. Sequential: Show object with points connected sequentially (e.g. (1,2,3) (2,3,4) (3,4,5))
2. Points: Show point cloud object
3. All to All: Show object with one point connected to all others (e.g. (1,2,3) (1,2,4) (1,3,2))

#### Build

Download project and open with Android Studio.

Sync project with Gradle.

Have Fun =D

